# 一、矢量

下载mongodb postgreSQL  配置postgis gdal

#### 1.利用china数据中的湖北省数据，裁剪出buildings_a中的属于湖北省范围内的全部建筑物，并另存到hubei.shp数据文件中

新建postgreSQL数据库 开启postgis扩展

```
createdb -h localhost -p 5432 -U postgres m1tsuha

CREATE EXTENSION postgis;
CREATE EXTENSION postgis_raster;
```

gdal命令行ogr2ogr导入china.shp buildings.shp至m1tsuha数据库

```
ogr2ogr -f PostgreSQL "PG:dbname=m1tsuha user=postgres password=123456" -lco PG_USE_COPY=YES -lco SHAPE_ENCODING=GBK -progress -update -append  -gt -1 -nln china E:/Desktop/Dataset/GeospatialData/china_shp/china.shp

ogr2ogr -f PostgreSQL "PG:dbname=m1tsuha user=postgres password=123456" -lco PG_USE_COPY=YES -lco SHAPE_ENCODING=GBK -progress -update -append  -gt -1 -nln buildings E:/Desktop/Dataset/GeospatialData/buildings_a/buildings_a.shp
```

postgreSQL 新建数据库test  开启postgis扩展 以备导入hubei.shp

postgis导入仍使用ogr2ogr命令行 mongodb直接使用可视化界面

```
ogr2ogr -f PostgreSQL PG:"dbname=test user=postgres password=123456" -nlt MULTIPOLYGON -lco GEOMETRY_NAME=geom -progress -update -append -gt 1 -nln niuchiyuan "C:/Users/M1tsuha/Desktop/Repositoy/Geospatial-Analysis/Practice/data/hubei/hubei.shp"
```

注意qgis导出shp的几何类型是MultiPolygon，但目标层也就是postgre数据库中目标集合类型是Polygon，因此要添加-nlt MULTIPOLYGON参数来成功导入
